name: CI/CD - Notification Worker

on:
  push:
    branches: [main, develop]
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
  pull_request:
    branches: [main, develop]
  workflow_dispatch:

permissions:
  contents: read
  packages: write
  security-events: write
  actions: read
  deployments: write
  issues: write

jobs:
  ci-cd:
    name: CI/CD Pipeline
    uses: tsoft-coe/.github/.github/workflows/reusable-nodejs-cicd.yml@main
    with:
      service_name: notification-worker
      node_version: '22'
      working_directory: .
      run_tests: true
      test_needs_postgres: false
      test_needs_redis: true
      enable_security_scan: true
      deployment_port: 3004
    secrets: inherit
